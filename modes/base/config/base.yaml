#config_version=6

mode:
  start_events: ball_starting
  stop_events: game_ended
  priority: 50

# -----------------------------
# SCORING
# -----------------------------
variable_player:
  s_left_upper_bumper_active:   { score: 10 }
  s_left_lower_bumper_active:   { score: 10 }
  s_left_sling_active:          { score: 10 }
  s_right_sling_active:         { score: 10 }

  s_right_skill_lane_active:    { score: 500 }
  s_left_skill_lane_active:     { score: 500 }
  s_middle_skill_lane_active:   { score: 500 }
  s_rollover_middle_active:     { score: 500 }
  s_rollover_upper_active:      { score: 500 }

  s_saucer_active:              { score: 0 }

  s_spinner_active:             { score: 100 }
  s_left_bank_target_left_active:    { score: 100 }
  s_left_bank_target_right_active:   { score: 100 }
  s_left_bank_target_middle_active:  { score: 100 }
  s_right_bank_target_left_active:   { score: 100 }
  s_right_bank_target_right_active:  { score: 100 }
  s_right_bank_target_middle_active: { score: 100 }
  s_right_inlane_active:             { score: 100 }
  s_left_inlane_active:              { score: 100 }
  s_left_outlane_active:             { score: 100 }
  s_left_rollover_active:            { score: 100 }
  s_right_outlane_active:            { score: 100 }
  s_right_rollover_active:           { score: 100 }
  s_pop_bumper_left_active:          { score: 100 }
  s_pop_bumper_right_active:         { score: 100 }
  s_pop_bumper_bottom_active:        { score: 100 }

# -----------------------------
# EVENTS
# -----------------------------
event_player:
  # fire these as soon as base has started (which happens on ball_started)
  mode_base_started:
    stop_mode_attract: {}
    mode_attract_will_stop: {}
    godot_attract_off: {}
    godot_play_base: {}

  mode_base_will_stop:
    godot_stop_base: {}
    godot_stop_base_music: {}
  game_ended:
    godot_stop_base_music: {}

  sh_escape_graveyard_start_hit:
    start_mode_escape_graveyard: {}

  mode_escape_graveyard_started:
    godot_stop_base: {}

counters:
  eg_pop_counter:
    count_events:
      - s_left_pop_bumper_active
      - s_middle_pop_bumper_active
      - s_right_pop_bumper_active
    count_complete_value: 3
    reset_on_complete: true
    reset_events: ball_started
    events_when_complete: eg_lit

shots:
  # Saucer starts the mode, but only while lit
  sh_escape_graveyard_start:
    switch: s_saucer
    enable_events: eg_lit
    disable_events: mode_escape_graveyard_started, ball_will_end

slides:
  base_blank:
    - type: rectangle
      width: 100%
      height: 100%
      color: black

slide_player:
  # when base starts, show the black slide (it will sit on top of attract)
  mode_base_started:
    base:
      action: play
      priority: 110
  mode_base_will_stop:
    base_blank: { action: remove }

  start_subsequent_loop:
    base_blank:
      action: play
      priority: 120

show_player:
  mode_base_started:
    attract_wave:  { action: stop }
    attract_pulse: { action: stop }

light_player:
  eg_lit:
    l_left_bank_lower: on       # choose any "start is lit" lamp you like
  mode_escape_graveyard_started:
    l_left_bank_lower: off
  ball_will_end:
    l_left_bank_lower: off

# -----------------------------
# SOUND
# -----------------------------
sound_player:

  ball_started{current_player.ball==1}:
    firstballintro:
      action: play
      loops: 0
      priority: 100
      volume: 0.6

  ball_started{ball>=2}:
    subsequentball:
      action: play
      priority: 100
      volume: 0.6
      fade_in: 1.5s

  mode_base_will_stop:
    firstballintro: { action: stop }
    subsequentball: { action: stop }

  ball_will_end:
    firstballintro: { action: stop }
    subsequentball: { action: stop }

  # Escape Graveyard starts → stop base music
  mode_escape_graveyard_started:
    firstballintro: { action: stop }
    subsequentball: { action: stop }

  # Escape Graveyard ends → stop graveyard music, resume base music
  mode_escape_graveyard_will_stop:
    escape_graveyard_music: { action: stop }
    subsequentball:
      action: play
      loops: 9999
      priority: 90
      volume: 0.6

  play_skilllane_quote_1:
    herehecomesnowimgettingoutofhere: { action: play, priority: 50, volume: 1 }
  play_skilllane_quote_2:
    heyyourestillafraid:              { action: play, priority: 50, volume: 1 }
  play_skilllane_quote_3:
    theyrecomingforyou:               { action: play, priority: 50, volume: 1 }
  play_skilllane_quote_4:
    looktherecomesoneofthemnow:       { action: play, priority: 50, volume: 1 }
  play_skilllane_quote_5:
    theyrecomingforyoubarbra:         { action: play, priority: 50, volume: 1 }
  play_skilllane_quote_6:
    theyrecomingtogetyoubarbra:       { action: play, priority: 50, volume: 1 }

# -----------------------------
# RANDOM QUOTES
# -----------------------------
random_event_player:
  s_right_skill_lane_active:
    events:
      - play_skilllane_quote_1
      - play_skilllane_quote_2
      - play_skilllane_quote_3
      - play_skilllane_quote_4
      - play_skilllane_quote_5
      - play_skilllane_quote_6

  s_left_skill_lane_active:
    events:
      - play_skilllane_quote_1
      - play_skilllane_quote_2
      - play_skilllane_quote_3
      - play_skilllane_quote_4
      - play_skilllane_quote_5
      - play_skilllane_quote_6

  s_middle_skill_lane_active:
    events:
      - play_skilllane_quote_1
      - play_skilllane_quote_2
      - play_skilllane_quote_3
      - play_skilllane_quote_4
      - play_skilllane_quote_5
      - play_skilllane_quote_6